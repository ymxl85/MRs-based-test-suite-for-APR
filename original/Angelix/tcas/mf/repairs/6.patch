--- a/tcas.c
+++ b/tcas.c
@@ -445,7 +445,7 @@
 #line 131
       if (need_upward_RA) {
 #line 131
-        if (need_downward_RA) {
+        if ((Other_Tracked_Alt <= Own_Tracked_Alt)) {
 #line 135
           alt_sep = 0;
         } else {
