        -:    0:Source:m22.c
        -:    0:Graph:m22.gcno
        -:    0:Data:m22.gcda
        -:    0:Runs:29
        -:    0:Programs:1
        -:    1:/*  -*- Last-Edit:  Fri Jan 29 11:13:27 1993 by Tarak S. Goradia; -*- */
        -:    2:/* $Log: tcas.c,v $
        -:    3: * Revision 1.2  1993/03/12  19:29:50  foster
        -:    4: * Correct logic bug which didn't allow output of 2 - hf
        -:    5: * 
        -:    6:
        -:    7: Vu: no global variables -- much faster
        -:    8:
        -:    9:*/
        -:   10:
        -:   11:#include <stdio.h>
        -:   12:
        -:   13:
function ALIM called 40 returned 100% blocks executed 100%
       40:   14:int ALIM (int Cur_Vertical_Sep, 
        -:   15:	  int High_Confidence,
        -:   16:	  int Two_of_Three_Reports_Valid,
        -:   17:	  int Own_Tracked_Alt,
        -:   18:	  int Own_Tracked_Alt_Rate,
        -:   19:	  int Other_Tracked_Alt,
        -:   20:	  int Alt_Layer_Value,
        -:   21:	  int Up_Separation,
        -:   22:	  int Down_Separation,
        -:   23:	  int Other_RAC,
        -:   24:	  int Other_Capability,
        -:   25:	  int Climb_Inhibit)
        -:   26:{
        -:   27:  /*Vu: original program has a bug here:
        -:   28:    it returns Positive_RA_Alt_Thres[Alt_Layer_value] 
        -:   29:    but Alt_Layer_value can be out of range, e.,g, < 0 or 3 <
        -:   30:    tmp sol: comment out inputs causing these probs
        -:   31:  */
        -:   32:
       40:   33:  if (Alt_Layer_Value == 0) return 400;
branch  0 taken 25% (fallthrough)
branch  1 taken 75%
       30:   34:  else if (Alt_Layer_Value == 1) return 500;
branch  0 taken 33% (fallthrough)
branch  1 taken 67%
       20:   35:  else if (Alt_Layer_Value == 2) return 640;
branch  0 taken 50% (fallthrough)
branch  1 taken 50%
       10:   36:  else return 740;
        -:   37:
        -:   38:}
        -:   39:
function Inhibit_Biased_Climb called 27 returned 100% blocks executed 100%
       27:   40:int Inhibit_Biased_Climb (int Cur_Vertical_Sep, 
        -:   41:			  int High_Confidence,
        -:   42:			  int Two_of_Three_Reports_Valid,
        -:   43:			  int Own_Tracked_Alt,
        -:   44:			  int Own_Tracked_Alt_Rate,
        -:   45:			  int Other_Tracked_Alt,
        -:   46:			  int Alt_Layer_Value,
        -:   47:			  int Up_Separation,
        -:   48:			  int Down_Separation,
        -:   49:			  int Other_RAC,
        -:   50:			  int Other_Capability,
        -:   51:			  int Climb_Inhibit)
        -:   52:{
        -:   53:
       27:   54:  return (Climb_Inhibit ? 
branch  0 taken 37% (fallthrough)
branch  1 taken 63%
        -:   55:	  100 + Up_Separation
        -:   56:	  : Up_Separation);
        -:   57:}
        -:   58:
function Non_Crossing_Biased_Climb called 27 returned 100% blocks executed 100%
       27:   59:int Non_Crossing_Biased_Climb(int Cur_Vertical_Sep, 
        -:   60:			      int High_Confidence,
        -:   61:			      int Two_of_Three_Reports_Valid,
        -:   62:			      int Own_Tracked_Alt,
        -:   63:			      int Own_Tracked_Alt_Rate,
        -:   64:			      int Other_Tracked_Alt,
        -:   65:			      int Alt_Layer_Value,
        -:   66:			      int Up_Separation,
        -:   67:			      int Down_Separation,
        -:   68:			      int Other_RAC,
        -:   69:			      int Other_Capability,
        -:   70:			      int Climb_Inhibit)
        -:   71:{
        -:   72:  int upward_preferred;
        -:   73:  int upward_crossing_situation;
        -:   74:  int result;
        -:   75:
       27:   76:  upward_preferred = Up_Separation > Down_Separation; //tvn: misc change Inhibit_Biased_Climb() > 
       27:   77:  if (upward_preferred)
branch  0 taken 33% (fallthrough)
branch  1 taken 67%
        -:   78:    {
       25:   79:      result = !(Own_Below_Threat(Cur_Vertical_Sep, 
call    0 returned 100%
branch  1 taken 89% (fallthrough)
branch  2 taken 11%
branch  3 taken 100% (fallthrough)
branch  4 taken 0%
branch  5 taken 50% (fallthrough)
branch  6 taken 50%
        -:   80:				  High_Confidence,
        -:   81:				  Two_of_Three_Reports_Valid,
        -:   82:				  Own_Tracked_Alt,
        -:   83:				  Own_Tracked_Alt_Rate,
        -:   84:				  Other_Tracked_Alt,
        -:   85:				  Alt_Layer_Value,
        -:   86:				  Up_Separation,
        -:   87:				  Down_Separation,
        -:   88:				  Other_RAC,
        -:   89:				  Other_Capability,
        8:   90:				  Climb_Inhibit)) || ((Own_Below_Threat(Cur_Vertical_Sep, 
call    0 returned 100%
        -:   91:									High_Confidence,
        -:   92:									Two_of_Three_Reports_Valid,
        -:   93:									Own_Tracked_Alt,
        -:   94:									Own_Tracked_Alt_Rate,
        -:   95:									Other_Tracked_Alt,
        -:   96:									Alt_Layer_Value,
        -:   97:									Up_Separation,
        -:   98:									Down_Separation,
        -:   99:									Other_RAC,
        -:  100:									Other_Capability,
        8:  101:									Climb_Inhibit)) && (!(Down_Separation >= ALIM(Cur_Vertical_Sep, 
call    0 returned 100%
        -:  102:														      High_Confidence,
        -:  103:														      Two_of_Three_Reports_Valid,
        -:  104:														      Own_Tracked_Alt,
        -:  105:														      Own_Tracked_Alt_Rate,
        -:  106:														      Other_Tracked_Alt,
        -:  107:														      Alt_Layer_Value,
        -:  108:														      Up_Separation,
        -:  109:														      Down_Separation,
        -:  110:														      Other_RAC,
        -:  111:														      Other_Capability,
        -:  112:														      Climb_Inhibit))));
        -:  113:    }
        -:  114:  else
        -:  115:    {	
       30:  116:      result = Own_Above_Threat(Cur_Vertical_Sep, 
branch  0 taken 67% (fallthrough)
branch  1 taken 33%
branch  2 taken 100% (fallthrough)
branch  3 taken 0%
branch  4 taken 67% (fallthrough)
branch  5 taken 33%
        -:  117:				High_Confidence,
        -:  118:				Two_of_Three_Reports_Valid,
        -:  119:				Own_Tracked_Alt,
        -:  120:				Own_Tracked_Alt_Rate,
        -:  121:				Other_Tracked_Alt,
        -:  122:				Alt_Layer_Value,
        -:  123:				Up_Separation,
        -:  124:				Down_Separation,
        -:  125:				Other_RAC,
        -:  126:				Other_Capability,
       30:  127:				Climb_Inhibit) && (Cur_Vertical_Sep >= 300) && (Up_Separation >= ALIM(Cur_Vertical_Sep, 
call    0 returned 100%
call    1 returned 100%
        -:  128:												      High_Confidence,
        -:  129:												      Two_of_Three_Reports_Valid,
        -:  130:												      Own_Tracked_Alt,
        -:  131:												      Own_Tracked_Alt_Rate,
        -:  132:												      Other_Tracked_Alt,
        -:  133:												      Alt_Layer_Value,
        -:  134:												      Up_Separation,
        -:  135:												      Down_Separation,
        -:  136:												      Other_RAC,
        -:  137:												      Other_Capability,
        -:  138:												      Climb_Inhibit));
        -:  139:    }
       27:  140:  return result;
        -:  141:}
        -:  142:
function Non_Crossing_Biased_Descend called 27 returned 100% blocks executed 100%
       27:  143:int Non_Crossing_Biased_Descend(int Cur_Vertical_Sep, 
        -:  144:				int High_Confidence,
        -:  145:				int Two_of_Three_Reports_Valid,
        -:  146:				int Own_Tracked_Alt,
        -:  147:				int Own_Tracked_Alt_Rate,
        -:  148:				int Other_Tracked_Alt,
        -:  149:				int Alt_Layer_Value,
        -:  150:				int Up_Separation,
        -:  151:				int Down_Separation,
        -:  152:				int Other_RAC,
        -:  153:				int Other_Capability,
        -:  154:				int Climb_Inhibit)
        -:  155:{
        -:  156:  int upward_preferred;
        -:  157:  int upward_crossing_situation;
        -:  158:  int result;
        -:  159:
       27:  160:  upward_preferred = Inhibit_Biased_Climb(Cur_Vertical_Sep, 
call    0 returned 100%
        -:  161:					  High_Confidence,
        -:  162:					  Two_of_Three_Reports_Valid,
        -:  163:					  Own_Tracked_Alt,
        -:  164:					  Own_Tracked_Alt_Rate,
        -:  165:					  Other_Tracked_Alt,
        -:  166:					  Alt_Layer_Value,
        -:  167:					  Up_Separation,
        -:  168:					  Down_Separation,
        -:  169:					  Other_RAC,
        -:  170:					  Other_Capability,
        -:  171:					  Climb_Inhibit) > Down_Separation;
       27:  172:  if (upward_preferred)
branch  0 taken 67% (fallthrough)
branch  1 taken 33%
        -:  173:    {
       30:  174:      result = Own_Below_Threat(Cur_Vertical_Sep, 
branch  0 taken 67% (fallthrough)
branch  1 taken 33%
branch  2 taken 100% (fallthrough)
branch  3 taken 0%
branch  4 taken 33% (fallthrough)
branch  5 taken 67%
        -:  175:				High_Confidence,
        -:  176:				Two_of_Three_Reports_Valid,
        -:  177:				Own_Tracked_Alt,
        -:  178:				Own_Tracked_Alt_Rate,
        -:  179:				Other_Tracked_Alt,
        -:  180:				Alt_Layer_Value,
        -:  181:				Up_Separation,
        -:  182:				Down_Separation,
        -:  183:				Other_RAC,
        -:  184:				Other_Capability,
       30:  185:				Climb_Inhibit) && (Cur_Vertical_Sep >= 300) && (Down_Separation >= ALIM(Cur_Vertical_Sep, 
call    0 returned 100%
call    1 returned 100%
        -:  186:													High_Confidence,
        -:  187:													Two_of_Three_Reports_Valid,
        -:  188:													Own_Tracked_Alt,
        -:  189:													Own_Tracked_Alt_Rate,
        -:  190:													Other_Tracked_Alt,
        -:  191:													Alt_Layer_Value,
        -:  192:													Up_Separation,
        -:  193:													Down_Separation,
        -:  194:													Other_RAC,
        -:  195:													Other_Capability,
        -:  196:													Climb_Inhibit));
        -:  197:    }
        -:  198:  else
        -:  199:    {
       25:  200:      result = !(Own_Above_Threat(Cur_Vertical_Sep, 
call    0 returned 100%
branch  1 taken 89% (fallthrough)
branch  2 taken 11%
branch  3 taken 100% (fallthrough)
branch  4 taken 0%
branch  5 taken 50% (fallthrough)
branch  6 taken 50%
        -:  201:				  High_Confidence,
        -:  202:				  Two_of_Three_Reports_Valid,
        -:  203:				  Own_Tracked_Alt,
        -:  204:				  Own_Tracked_Alt_Rate,
        -:  205:				  Other_Tracked_Alt,
        -:  206:				  Alt_Layer_Value,
        -:  207:				  Up_Separation,
        -:  208:				  Down_Separation,
        -:  209:				  Other_RAC,
        -:  210:				  Other_Capability,
        8:  211:				  Climb_Inhibit)) || ((Own_Above_Threat(Cur_Vertical_Sep, 
call    0 returned 100%
        -:  212:									High_Confidence,
        -:  213:									Two_of_Three_Reports_Valid,
        -:  214:									Own_Tracked_Alt,
        -:  215:									Own_Tracked_Alt_Rate,
        -:  216:									Other_Tracked_Alt,
        -:  217:									Alt_Layer_Value,
        -:  218:									Up_Separation,
        -:  219:									Down_Separation,
        -:  220:									Other_RAC,
        -:  221:									Other_Capability,
        8:  222:									Climb_Inhibit)) && (Up_Separation >= ALIM(Cur_Vertical_Sep, 
call    0 returned 100%
        -:  223:														  High_Confidence,
        -:  224:														  Two_of_Three_Reports_Valid,
        -:  225:														  Own_Tracked_Alt,
        -:  226:														  Own_Tracked_Alt_Rate,
        -:  227:														  Other_Tracked_Alt,
        -:  228:														  Alt_Layer_Value,
        -:  229:														  Up_Separation,
        -:  230:														  Down_Separation,
        -:  231:														  Other_RAC,
        -:  232:														  Other_Capability,
        -:  233:														  Climb_Inhibit)));
        -:  234:    }
       27:  235:  return result;
        -:  236:}
        -:  237:
function Own_Below_Threat called 48 returned 100% blocks executed 100%
       48:  238:int Own_Below_Threat(int Cur_Vertical_Sep, 
        -:  239:		     int High_Confidence,
        -:  240:		     int Two_of_Three_Reports_Valid,
        -:  241:		     int Own_Tracked_Alt,
        -:  242:		     int Own_Tracked_Alt_Rate,
        -:  243:		     int Other_Tracked_Alt,
        -:  244:		     int Alt_Layer_Value,
        -:  245:		     int Up_Separation,
        -:  246:		     int Down_Separation,
        -:  247:		     int Other_RAC,
        -:  248:		     int Other_Capability,
        -:  249:		     int Climb_Inhibit)
        -:  250:{
       48:  251:  return (Own_Tracked_Alt < Other_Tracked_Alt);
        -:  252:}
        -:  253:
function Own_Above_Threat called 44 returned 100% blocks executed 100%
       44:  254:int Own_Above_Threat(int Cur_Vertical_Sep, 
        -:  255:		     int High_Confidence,
        -:  256:		     int Two_of_Three_Reports_Valid,
        -:  257:		     int Own_Tracked_Alt,
        -:  258:		     int Own_Tracked_Alt_Rate,
        -:  259:		     int Other_Tracked_Alt,
        -:  260:		     int Alt_Layer_Value,
        -:  261:		     int Up_Separation,
        -:  262:		     int Down_Separation,
        -:  263:		     int Other_RAC,
        -:  264:		     int Other_Capability,
        -:  265:		     int Climb_Inhibit)
        -:  266:{
       44:  267:  return (Other_Tracked_Alt < Own_Tracked_Alt);
        -:  268:}
        -:  269:
function alt_sep_test called 29 returned 100% blocks executed 97%
       29:  270:int alt_sep_test(int Cur_Vertical_Sep, 
        -:  271:		 int High_Confidence,
        -:  272:		 int Two_of_Three_Reports_Valid,
        -:  273:		 int Own_Tracked_Alt,
        -:  274:		 int Own_Tracked_Alt_Rate,
        -:  275:		 int Other_Tracked_Alt,
        -:  276:		 int Alt_Layer_Value,
        -:  277:		 int Up_Separation,
        -:  278:		 int Down_Separation,
        -:  279:		 int Other_RAC,
        -:  280:		 int Other_Capability,
        -:  281:		 int Climb_Inhibit)
        -:  282:{
        -:  283:  int enabled, tcas_equipped, intent_not_known;
        -:  284:  int need_upward_RA, need_downward_RA;
        -:  285:  int alt_sep;
        -:  286:
       29:  287:  enabled = High_Confidence && (Own_Tracked_Alt_Rate <= 600) && (Cur_Vertical_Sep > 600);
branch  0 taken 97% (fallthrough)
branch  1 taken 3%
branch  2 taken 100% (fallthrough)
branch  3 taken 0%
branch  4 taken 100% (fallthrough)
branch  5 taken 0%
       29:  288:  tcas_equipped = Other_Capability == 1;
       29:  289:  intent_not_known = Two_of_Three_Reports_Valid && Other_RAC == 0;
branch  0 taken 93% (fallthrough)
branch  1 taken 7%
branch  2 taken 100% (fallthrough)
branch  3 taken 0%
        -:  290:    
       29:  291:  alt_sep = 0;
        -:  292:    
       29:  293:  if (enabled && ((tcas_equipped && intent_not_known) || !tcas_equipped))
branch  0 taken 97% (fallthrough)
branch  1 taken 3%
branch  2 taken 4% (fallthrough)
branch  3 taken 96%
branch  4 taken 100% (fallthrough)
branch  5 taken 0%
branch  6 taken 96% (fallthrough)
branch  7 taken 4%
        -:  294:    {
       40:  295:      need_upward_RA = Non_Crossing_Biased_Climb(Cur_Vertical_Sep, 
branch  0 taken 48% (fallthrough)
branch  1 taken 52%
branch  2 taken 31% (fallthrough)
branch  3 taken 69%
        -:  296:						 High_Confidence,
        -:  297:						 Two_of_Three_Reports_Valid,
        -:  298:						 Own_Tracked_Alt,
        -:  299:						 Own_Tracked_Alt_Rate,
        -:  300:						 Other_Tracked_Alt,
        -:  301:						 Alt_Layer_Value,
        -:  302:						 Up_Separation,
        -:  303:						 Down_Separation,
        -:  304:						 Other_RAC,
        -:  305:						 Other_Capability,
       27:  306:						 Climb_Inhibit) && 
call    0 returned 100%
        -:  307:	Own_Below_Threat(Cur_Vertical_Sep, 
        -:  308:			 High_Confidence,
        -:  309:			 Two_of_Three_Reports_Valid,
        -:  310:			 Own_Tracked_Alt,
        -:  311:			 Own_Tracked_Alt_Rate,
        -:  312:			 Other_Tracked_Alt,
        -:  313:			 Alt_Layer_Value,
        -:  314:			 Up_Separation,
        -:  315:			 Down_Separation,
        -:  316:			 Other_RAC,
        -:  317:			 Other_Capability,
       13:  318:			 Climb_Inhibit);
call    0 returned 100%
       36:  319:      need_downward_RA = Non_Crossing_Biased_Descend(Cur_Vertical_Sep, 
branch  0 taken 33% (fallthrough)
branch  1 taken 67%
branch  2 taken 44% (fallthrough)
branch  3 taken 56%
        -:  320:						     High_Confidence,
        -:  321:						     Two_of_Three_Reports_Valid,
        -:  322:						     Own_Tracked_Alt,
        -:  323:						     Own_Tracked_Alt_Rate,
        -:  324:						     Other_Tracked_Alt,
        -:  325:						     Alt_Layer_Value,
        -:  326:						     Up_Separation,
        -:  327:						     Down_Separation,
        -:  328:						     Other_RAC,
        -:  329:						     Other_Capability,
       27:  330:						     Climb_Inhibit) && Own_Above_Threat(Cur_Vertical_Sep, 
call    0 returned 100%
        -:  331:											High_Confidence,
        -:  332:											Two_of_Three_Reports_Valid,
        -:  333:											Own_Tracked_Alt,
        -:  334:											Own_Tracked_Alt_Rate,
        -:  335:											Other_Tracked_Alt,
        -:  336:											Alt_Layer_Value,
        -:  337:											Up_Separation,
        -:  338:											Down_Separation,
        -:  339:											Other_RAC,
        -:  340:											Other_Capability,
        9:  341:											Climb_Inhibit);
call    0 returned 100%
       27:  342:      if (need_upward_RA && need_downward_RA)
branch  0 taken 15% (fallthrough)
branch  1 taken 85%
branch  2 taken 0% (fallthrough)
branch  3 taken 100%
        -:  343:	/* unreachable: requires Own_Below_Threat and Own_Above_Threat
        -:  344:	   to both be true - that requires Own_Tracked_Alt < Other_Tracked_Alt
        -:  345:	   and Other_Tracked_Alt < Own_Tracked_Alt, which isn't possible */
    #####:  346:	alt_sep = 0;
       27:  347:      else if (need_upward_RA)
branch  0 taken 15% (fallthrough)
branch  1 taken 85%
        4:  348:	alt_sep = 1;
       23:  349:      else if (need_downward_RA)
branch  0 taken 17% (fallthrough)
branch  1 taken 83%
        4:  350:	alt_sep = 2;
        -:  351:      else
       19:  352:	alt_sep = 0;
        -:  353:    }
        -:  354:    
       29:  355:  return alt_sep;
        -:  356:}
        -:  357:
        -:  358:
        -:  359:
        -:  360:
        -:  361:
        -:  362:
function mainQ called 29 returned 100% blocks executed 100%
       29:  363:int mainQ(int Cur_Vertical_Sep, 
        -:  364:	  int High_Confidence,
        -:  365:	  int Two_of_Three_Reports_Valid,
        -:  366:	  int Own_Tracked_Alt,
        -:  367:	  int Own_Tracked_Alt_Rate,
        -:  368:	  int Other_Tracked_Alt,
        -:  369:	  int Alt_Layer_Value,
        -:  370:	  int Up_Separation,
        -:  371:	  int Down_Separation,
        -:  372:	  int Other_RAC,
        -:  373:	  int Other_Capability,
        -:  374:	  int Climb_Inhibit){
       29:  375:  return alt_sep_test(Cur_Vertical_Sep, 
call    0 returned 100%
        -:  376:		      High_Confidence,
        -:  377:		      Two_of_Three_Reports_Valid,
        -:  378:		      Own_Tracked_Alt,
        -:  379:		      Own_Tracked_Alt_Rate,
        -:  380:		      Other_Tracked_Alt,
        -:  381:		      Alt_Layer_Value,
        -:  382:		      Up_Separation,
        -:  383:		      Down_Separation,
        -:  384:		      Other_RAC,
        -:  385:		      Other_Capability,
        -:  386:		      Climb_Inhibit);
        -:  387:}
        -:  388:
function main called 29 returned 100% blocks executed 100%
       29:  389:int main(int argc, char*argv[])
        -:  390:{
      319:  391:  fprintf(stdout, "%d\n", mainQ(atoi(argv[1]),
call    0 returned 100%
call    1 returned 100%
call    2 returned 100%
call    3 returned 100%
call    4 returned 100%
call    5 returned 100%
call    6 returned 100%
call    7 returned 100%
call    8 returned 100%
call    9 returned 100%
call   10 returned 100%
call   11 returned 100%
call   12 returned 100%
call   13 returned 100%
       29:  392:				atoi(argv[2]),
       29:  393:				atoi(argv[3]),
       29:  394:				atoi(argv[4]),
       29:  395:				atoi(argv[5]),
       29:  396:				atoi(argv[6]),
       29:  397:				atoi(argv[7]),
       29:  398:				atoi(argv[8]),
       29:  399:				atoi(argv[9]),
       29:  400:				atoi(argv[10]),
       29:  401:				atoi(argv[11]),
       29:  402:				atoi(argv[12])
        -:  403:				));
       29:  404:  return 0;
        -:  405:}
